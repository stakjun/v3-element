import{an as b,a1 as E,ao as g,d as R,e as u,f as _,h as T,o as C,y as O,z as V,a4 as $,x as m,n as M,W as S,D as y,b as k,t as L,c as A,$ as Z,A as H,a5 as P,T as W}from"./framework.9acfa5e3.js";import{u as j,c as q,_ as I,R as F}from"./useEventListener.ca1ad370.js";let G=1;const a=b([]),ne=s=>{const{nextZIndex:i}=j(),e=`message_${G++}`,c=document.createElement("div"),t=()=>{const n=a.findIndex(f=>f.id===e);n!==-1&&(a.splice(n,1),g(null,c))},v=()=>{const n=a.find(f=>f.id===e);n&&(n.vm.exposed.visible.value=!1)},r={...s,id:e,zIndex:i(),onDestroy:t},l=E(p,r);g(l,c),document.body.appendChild(c.firstElementChild);const x=l.component,d={id:e,vnode:l,vm:x,close:v,props:r};return a.push(d),d},J=s=>{const i=a.findIndex(e=>e.id===s);return i<=0?0:a[i-1].vm.exposed.bottomOffset.value},K={class:"vk-notification__text"},Q={class:"vk-notification__title"},U={class:"vk-notification__content"},X={key:0,class:"vk-notification__close"},p=R({name:"VkNotification",__name:"Notification",props:{title:{},message:{},type:{default:"info"},showClose:{type:Boolean,default:!0},duration:{default:3e3},icon:{},offset:{default:20},id:{},zIndex:{},onDestroy:{}},setup(s,{expose:i}){const e=s,c=u(()=>{if(e.icon)return e.icon;switch(e.type){case"info":return"circle-info";case"warning":return"circle-exclamation";case"danger":return"circle-xmark";case"success":return"circle-check";default:return"circle-info"}}),t=_(!1);let v;const r=()=>{e.duration!==0&&(v=setTimeout(()=>{t.value=!1},e.duration))},l=()=>{clearTimeout(v)};q(document,"keydown",o=>{o.code==="Escape"&&(t.value=!1)});const d=_(null),n=_(0),f=u(()=>J(e.id)),w=u(()=>f.value+e.offset),z=u(()=>w.value+n.value),B=u(()=>({top:w.value+"px",zIndex:e.zIndex})),D=()=>{n.value=d.value.getBoundingClientRect().height},N=()=>{e.onDestroy()};return T(()=>{t.value=!0,r()}),i({bottomOffset:z,visible:t}),(o,h)=>(C(),O(W,{name:"vk-notification-fade",onEnter:D,onAfterLeave:N},{default:V(()=>[$(m("div",{ref_key:"notificationRef",ref:d,class:M(["vk-notification",{[`vk-notification--${o.type}`]:o.type,"is-close":o.showClose}]),role:"alert",style:S(B.value),onMouseenter:l,onMouseleave:r},[y(k(I),{class:"vk-notification__icon",icon:c.value},null,8,["icon"]),m("div",K,[m("div",Q,L(o.title),1),m("div",U,[y(k(F),{"v-node":o.message},null,8,["v-node"])])]),o.showClose?(C(),A("div",X,[y(k(I),{icon:"xmark",onClick:h[0]||(h[0]=Z(Y=>t.value=!1,["stop"]))})])):H("",!0)],38),[[P,t.value]])]),_:1}))}});p.install=s=>{s.component(p.name,p)};export{p as _,ne as c};
